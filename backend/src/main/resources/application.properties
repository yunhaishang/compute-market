spring.application.name=iExec

# ==================== 数据库配置 ====================
# H2 内存数据库配置
spring.datasource.url=jdbc:h2:mem:iexecdb
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 控制台配置（开发环境）
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# JPA/Hibernate 配置
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# ==================== Web3j 区块链配置 ====================
# Arbitrum Sepolia RPC 节点地址
# 选项1：使用 Infura（需要注册获取 PROJECT_ID：https://infura.io/）
web3j.client-address=https://arbitrum-sepolia.infura.io/v3/${INFURA_PROJECT_ID:YOUR_INFURA_PROJECT_ID}

# 选项2：使用 Alchemy（需要注册获取 API_KEY：https://www.alchemy.com/）
# web3j.client-address=https://arb-sepolia.g.alchemy.com/v2/${ALCHEMY_API_KEY}

# 选项3：使用公共 RPC（免费但可能不稳定）
# web3j.client-address=https://sepolia-rollup.arbitrum.io/rpc

# 选项4：使用 Chainstack 公共端点（免费）
# web3j.client-address=https://arbitrum-sepolia.public.blastapi.io

# 智能合约地址（部署后填写）
contract.address=0x5FbDB2315678afecb367f032d93F642f64180aa3

# 管理员私钥（用于回写链上状态，请妥善保管）
# 警告：生产环境不要在配置文件中明文存储私钥！
contract.admin.privatekey=${ADMIN_PRIVATE_KEY:}

# ==================== iExec 配置 ====================
# iExec 工作目录
iexec.workspace.dir=${IEXEC_WORKSPACE:/tmp/iexec-workspace}

# iExec 链网络（bellecour=主网, viviani=测试网）
# 注意：iExec 在 Arbitrum 上运行，但使用自己的侧链
iexec.chain=bellecour

# iExec 命令超时时间（秒）
iexec.command.timeout=300

# iExec 钱包私钥（用于调用 iExec CLI）
iexec.wallet.privatekey=${IEXEC_WALLET_KEY:}

# ==================== 任务监控配置 ====================
# 任务状态监控间隔（毫秒）
task.monitor.interval=30000

# 任务超时时间（毫秒，默认1小时）
task.monitor.timeout=3600000

# ==================== 日志配置 ====================
# 日志级别
logging.level.root=INFO
logging.level.com.blockchain.iExec=DEBUG
logging.level.org.web3j=DEBUG

# 日志输出格式
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ==================== 服务器配置 ====================
server.port=8080
server.servlet.context-path=/api

# ==================== Actuator 监控配置（可选）====================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
